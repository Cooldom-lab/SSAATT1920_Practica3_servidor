<!doctype html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="estilos.css">
        <title>SSAATT</title>
        <script>

            let cont = 1;


            function RequestLogin() {
                //Datos
                var usuario1 = document.getElementById("usuario").value;
                var contrasena1 = document.getElementById("contraseña").value;
                var datos = {
                    "user": usuario1,
                    "password": contrasena1
                };


                fetch("/login", {
                    method: 'POST',
                    body: JSON.stringify(datos),
                    headers: {
                        'Content-Type': 'application/json'
                    }

                }).then(response => console.log('Exito', response))
                  .catch(error => console.error('Error:', error));
                ocultarLogin();

            }
            
            function ocultarLogin(){
                
				document.getElementById("Sesion").style.display= 'none';
				document.getElementById("nav").style.display= 'block';
				document.getElementById("InfoLogin").style.display= 'none';
				document.getElementById("ErrorLogin").style.display= 'block';                
            }



            function ONewRepository() {
                document.getElementById("question").style.display = 'none';
                document.getElementById("repository").style.display = 'block';
                document.getElementById("list").style.display = 'none';
                document.getElementById("InfoQuest").style.display = 'none';
                document.getElementById("InfoRepos").style.display = 'block';
                document.getElementById("listRepos").style.display = 'none';


            }
            function creaRepos() {
                var author = document.getElementById("inputuserrepository").value;
                var newRepo = document.getElementById(
                        "inputnewrepositoy").value;
                let data = {
                    "user": author,
                    "name": newRepo
                };
                fetch("/repository", {
                    method: 'PUT',
                    body: JSON.stringify(data),
                    headers: {
                        'Content-Type': 'application/json'
                    }
                }).then(response => console.log('Exito', response))
                  .catch(error => console.error('Error', error));
                  
            }
            function ONewQuest() {
                document.getElementById("question").style.display = 'block';
                document.getElementById("repository").style.display = 'none';
                document.getElementById("list").style.display = 'none';
                document.getElementById("InfoQuest").style.display = 'block';
                document.getElementById("InfoRepos").style.display = 'none';
                document.getElementById("listRepos").style.display = 'none';

            }
            function ListRepository() {
                document.getElementById("question").style.display = 'none';
                document.getElementById("repository").style.display = 'none';
                document.getElementById("list").style.display = 'block';
                document.getElementById("InfoQuest").style.display = 'none';
                document.getElementById("InfoRepos").style.display = 'none';
                document.getElementById("listRepos").style.display = 'block';


            }
            function listaReposs() {
                fetch("/repository")
                        .then(function (response) {
                            return response.json();
                        })
                        .then(function (myJson) {
                            console.log(myJson);
                        });
            }


            function AddQuest() {
                let contenedor = document.getElementById("nuevasrespuestas");
                let text = document.createElement("h4");
                let input = document.createElement("input");
                input.setAttribute("id", "Test" + cont);
                text.innerHTML = "Respuesta Nº " + cont;
                contenedor.appendChild(text);
                contenedor.appendChild(input);
                let contenedor2 = document.getElementById("ContRespuestas");
                let opc = document.createElement("option");
                opc.setAttribute("label", cont);
                contenedor2.appendChild(opc);
                cont++;
                
            };
            

        </script>
    </head>

    <body>
        <!-- Header -->
        <div class="agrupar">
            <header id="header"><h1>Plataforma de autoevaluacion SSAATT</h1></header>

            <!-- Navegador -->	
            <nav id="nav" >
                <ul>
                    <li class="verify"><button type="button" onClick= "ONewRepository()" name="New-Repository">Crear Repositorio</button></li>
                    <li class="verify"><button type="button" onClick="ONewQuest()" name="New-Question">Crear Pregunta</button></li>
                    <li class="verify"><button type="button" onClick="ListRepository()">Listar Repositorios</button></li>
                </ul>

            </nav>
            <!-- Inicio de Sesión -->
            <!-- Inicio de Sesión -->
            <section id="Sesion">
                <article id="ISesion">
                    <div class="Login-User"></div>
                    <ul class="list">	
                        <li><h2>Inicio de sesión</h2></li>
                        <li><input id="usuario"  type="text"  placeholder="Usuario" value="usuario"></li>
                        <li><input id="contraseña"  type="password"  placeholder="Contraseña" value="12345"></li>
                        <li><button type="button" onClick="RequestLogin()">Login</button></li>
                        <li id="ErrorLogin">Usuario o contraseña incorrecta</li>
                    </ul>
                </article>	
            </section>

            <aside id="InfoLogin"><h2>Información de Acceso</h2>
                <p class="Informacion">Para iniciar sesión, solo debe de introducir el usuario y la contraseña en los campos indicados. Si tiene algún problema de autentificación, contacte con el administrador de la web.</p>
            </aside>
            <section id="question">
                <article>
                    <form class="question_form" >
                        <h4>Autor</h4>
                        <input type="text" name="Autor" value=""><br>
                        <h4>Titulo</h4>
                        <input type="text" name="Titulo" value=""><br>
                        <h4>Enunciado</h4>
                        <textarea name="Enunciado" rows="6" cols="60"></textarea><br>
                        <button class="opc3" type="button" onClick="AddQuest()">Añadir Respuesta</button>	
                        <div id="nuevasrespuestas">
                        </div>
                        <h4>Respuesta correcta</h4>
                        <select id="ContRespuestas">

                        </select><br>
                        <button class="opc3"><h4>Enviar</h4></button>
                    </form>
                    <script>
                        function putQuest(){
                            
                        }
                        
                    </script>
                </article>
                <article>
                </article>
            </section>
            <section id="repository">
                <article>
                    <h4>Autor</h4>
                    <input id="inputuserrepository">
                    <h4>Nombre del repositorio</h4>
                    <input id="inputnewrepositoy"><br><br>
                    <button class="opc3" onClick="creaRepos()">Enviar</button>
                </article>		
            </section>
            <section id="list">
                <article>
                    <button class="opc3" onClick="listaReposs()">Listar Repositorios</button>

                </article>
            </section>
            <aside id="InfoQuest"><h2>Información sobre Generador de Preguntas</h2>
                <p class="Informacion">Para crear un nuevo formulario de preguntas, tan solo tiene que rellenar los campos solicitados y elegir una respuesta válida. Despues, pulse el boton de enviar para mandar la pregunta al servidor. Si tiene algún problema contacte con el administrador de la página web.</p>
            </aside>
            <aside id="InfoRepos"><h2>Información sobre crear un Repositorio</h2>
                <p class="Informacion">Para crear un nuevo repositorio, solo tiene que rellenar los datos solicitados y pulsar el boton de crear repositorio. Si tiene algún problema contacte con el administrador de la página web.</p>
            </aside>
            <aside id="listRepos"><h2>Información sobre el listado de repositorios</h2>
                <p class="Informacion">Para listar los repositorios tan solo debe de pulsar el botón que aparece en pantalla. Si tiene algún problema contacte con el administrador de la página web.</p>
            </aside>

        </div>
    </body>
</html>
